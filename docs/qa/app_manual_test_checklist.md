# 《灵感之主》APP 人工测试条目（QA 用）

本文档供 QA 对当前版本进行**人工功能测试**使用，按模块列出可执行条目，每条含**步骤**与**预期结果**。勾选 `[]` 表示待测，`[x]` 表示已通过，`[!]` 表示有优化反馈或未通过，`[-]` 表示未开发或跳过测试。

**适用范围**：基于 [项目进度审查记录](../project/review_log.md) 与 [项目管理](../project/project_manager.md)，当前测试范围覆盖 **P0 基础架设** 与 **P1 工具先行** 已实现功能；P2 手帐核心尚未完成，手账页仅为占位。

---

## 1. 文档说明与版本

| 项 | 说明 |
|----|------|
| 文档位置 | `docs/qa/app_manual_test_checklist.md` |
| 适用阶段 | P0 已完成、P1 已完成（截至 2026-02-23 Review） |
| 测试类型 | 人工功能测试（非自动化） |
| 参考文档 | [P0 交付清单](../project/p0_deliverables.md)、[P1 交付清单](../project/p1_deliverables.md)、[路由规格](../technical/routes_spec.md)、[主壳规格](../design/main_shell_spec.md) |

---

## 2. 测试环境与前置

- **设备**：建议在真机或模拟器上执行（至少覆盖一种分辨率）。
- **构建**：使用 `flutter run` 或已安装的 Debug/Release 包。
- **前置**：无登录要求；如需验证设置持久化，需重启应用。

---

## 3. P0：基础架设

### 3.1 应用启动与主题

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-1 | 冷启动无崩溃 | 从桌面点击应用图标启动 | 应用正常打开，无闪退、无白屏卡死 | [x] |
| P0-2 | 首屏为首页 | 启动后观察首屏 | 显示首页（Home）内容，底部为五页签导航 | [x] |
| P0-3 | 浅色主题展示 | 在设置中选「浅色」后返回任意页 | 界面为浅色主题，主色与设计一致（如复古风格） | [x] |
| P0-4 | 深色主题展示 | 在设置中选「深色」后返回任意页 | 界面为深色主题，色板切换正确 | [x] |
| P0-5 | 跟随系统主题 | 在设置中选「跟随系统」，并切换系统深/浅色 | 应用主题随系统切换 | [x] |

### 3.2 路由与底部导航

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-6 | 根路径重定向 | 若支持直接打开 `/` 或首次启动 | 实际显示首页，等价于 `/home` | [x] |
| P0-7 | 底部五页签可见 | 观察底部导航栏 | 从左到右依次：首页、工具、手账、市集、我的（或等价文案） | [x] |
| P0-8 | 点击「首页」 | 从任意页点击底部「首页」 | 进入首页（HomeScreen），内容区切换正确 | [x] |
| P0-9 | 点击「工具」 | 点击底部「工具」 | 进入工具聚合页（ToolsScreen） | [x] |
| P0-10 | 点击「手账」 | 点击底部「手账」 | 进入手账列表占位页（JournalListScreen） | [x] |
| P0-11 | 点击「市集」 | 点击底部「市集」 | 进入市集占位页（MarketScreen） | [x] |
| P0-12 | 点击「我的」 | 点击底部「我的」 | 进入「我的」/设置页（MeScreen 或 SettingsScreen） | [x] |
| P0-13 | 页签高亮正确 | 切换不同页签 | 当前页签有高亮/选中态，与内容区一致 | [x] |

### 3.3 设置与持久化

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-14 | 设置页可进入 | 从「我的」或底部「我的」进入设置 | 可见主题、语言等设置项 | [x] |
| P0-15 | 主题切换生效 | 在设置中切换主题（浅/深/跟随系统） | 立即生效，无需重启 | [x] |
| P0-16 | 主题持久化 | 在设置中改为深色 → 完全退出应用 → 再次打开 | 仍为深色主题 | [x] |
| P0-17 | 语言切换（若有） | 若有语言选项，切换语言 | 界面文案切换正确或符合 l10n 占位 | [x] |
| P0-18 | 语言持久化（若有） | 切换语言后退出并重启 | 语言设置保持 | [x] |

---

## 4. P1：工具先行

### 4.1 工具聚合页与入口

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-1 | 工具页入口形式 | 进入「工具」页 | 骰子、诗签、占卜（塔罗）以按钮/卡片形式排布 | [x] |
| P1-2 | 骰子入口文案 | 查看工具页 | 有「骰子」或 toolDice 对应文案的入口 | [x] |
| P1-3 | 诗签入口文案 | 查看工具页 | 有「诗签」或 toolPoemSlip 对应文案的入口 | [x] |
| P1-4 | 占卜/塔罗入口文案 | 查看工具页 | 有「占卜」/「塔罗」或 toolTarot 对应文案的入口 | [x] |

### 4.2 骰子工具（/tools/dice）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-5 | 进入骰子页 | 从工具页点击骰子入口 | 进入骰子页（DiceScreen），可返回工具页 | [x] |
| P1-6 | 快捷单颗 d6 | 点击 d6 快捷按钮（若有） | 掷出 1d6，结果在 1～6 之间，界面展示 total 或 rolls | [x] |
| P1-7 | 快捷 d20 | 点击 d20 快捷按钮（若有） | 掷出 1d20，结果在 1～20 之间 | [x] |
| P1-8 | 表达式 2d6+3 | 输入「2d6+3」并掷骰 | 得到 2 颗 d6 点数之和加 3，展示表达式与 total（及可选 rolls） | [x] |
| P1-9 | 表达式 d20 | 输入「d20」并掷骰 | 得到 1 颗 d20 结果，1～20 | [x] |
| P1-10 | 非法表达式提示 | 输入非法内容（如「d」「0d6」）并掷骰 | 弹框或明确提示解析失败（如 INVALID_DICE 文案） | [x] |
| P1-11 | 标准面数 d4/d8/d10/d12 | 使用 d4、d8、d10、d12 各掷一次（快捷或表达式） | 点数在对应面数范围内 | [!] |
| P1-12 | 历史/会话（若有） | 连续掷骰多次 | 有历史列表或会话展示，条数符合规格（如最多 100 条） | [!] |
| P1-13 | 复制结果（若有） | 点击复制按钮（若有） | 复制格式为「表达式=总和」或规格约定格式 | [x] |

### 4.3 诗签工具（/tools/poem-slip）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-14 | 进入诗签页 | 从工具页点击诗签入口 | 进入诗签页（PoemSlipScreen），可返回工具页 | [x] |
| P1-15 | 抽签一次 | 点击抽签按钮 | 展示一条签文（content 全文），结果非空 | [!] |
| P1-16 | 再抽一次 | 再次点击抽签 | 可得到新签（允许与上条相同） | [x] |
| P1-17 | 换库（若有多库） | 若有库选择器，切换库后抽签 | 签文来自所选库 | [-] |
| P1-18 | 默认库 | 未切换库时抽签 | 使用默认库（如妈祖灵签） | [x] |
| P1-19 | 复制（若有） | 点击复制（若有） | 签文或约定格式已复制 | [x] |

### 4.4 简易占卜/塔罗（/tools/tarot）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-20 | 进入占卜页 | 从工具页点击占卜/塔罗入口 | 进入占卜页（TarotScreen），可返回工具页 | [x] |
| P1-21 | 抽牌一次 | 点击抽牌按钮 | 展示一张塔罗牌：牌名、正/逆位、释义 | [x] |
| P1-22 | 正逆位展示 | 抽牌后观察 | 逆位时牌图或文案能区分正逆（如旋转或逆位释义） | [x] |
| P1-23 | 释义展示 | 抽牌后观察 | 有简明释义（正位或逆位对应 meaning） | [x] |
| P1-24 | 放回/不放回（若有） | 若有模式切换，切换后连续抽牌 | 行为符合所选模式 | [x] |
| P1-25 | 复制（若有） | 点击复制（若有） | 牌面信息或约定格式已复制 | [x] |

### 4.5 工具结果与导航回归

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-26 | 从首页到工具子页 | 首页 → 工具 → 骰子/诗签/占卜 | 能进入对应子页并返回，返回后回到工具页 | [x] |
| P1-27 | 子页返回 | 在骰子/诗签/占卜页点击返回 | 回到工具聚合页，不直接退出应用 | [x] |
| P1-28 | 结果可重复生成 | 在各工具中多次操作 | 每次掷骰/抽签/抽牌均可再次执行，无卡死 | [x] |

---

## 5. 手账/市集/首页占位（P0 占位）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| H-1 | 手账页可打开 | 点击底部「手账」 | 显示手账列表占位页（P2 未完成时为占位或空状态） | [x] |
| H-2 | 市集页可打开 | 点击底部「市集」 | 显示市集占位页 | [x] |
| H-3 | 首页可打开 | 点击底部「首页」 | 显示首页占位/社区占位 | [x] |

---

## 6. 回归与兼容（可选）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| R-1 | 横竖屏切换（若支持） | 在工具子页旋转设备 | 不崩溃，布局适配或保持可用 | [-] |
| R-2 | 前后台切换 | 在任意页切到后台再返回 | 应用恢复前台，状态不异常 | [x] |
| R-3 | 多次切换页签 | 在五页签间快速多次切换 | 无崩溃、无错乱高亮 | [x] |

---

## 7. 问题记录表（模板）

测试过程中可将问题记录于下表（或单独缺陷单）：

| 序号 | 修复单编号 | 测试项 | 现象描述 | 严重程度 |
|------|------------|--------|----------|----------|
| 1 | [B-P1-1-001](bug_fix_list.md#b-p1-1-001) | P1-11 | d100 两粒 d10 应按十位+个位表示（如 3 与 7 为 37），当前为相加 10 | 中 |
| 2 | [B-P1-1-002](bug_fix_list.md#b-p1-1-002) | P1-12 | 未确认舍弃/重 Roll 时再次掷骰，上次结果应记为舍弃并进入历史 | 低 |
| 3 | [B-P1-1-003](bug_fix_list.md#b-p1-1-003) | P1-15 | 诗签需签头文案（如「妈祖灵签 第11签」），当前直接显示签 id | 低 |

---

## 8. 修订记录

| 日期 | 修订内容 |
|------|----------|
| 2026-02-23 | 初版：覆盖 P0 + P1 人工测试条目，对应 review_log 2026-02-23 进度 |

---

*本文档随项目阶段更新；P2 手帐核心完成后可增补「手账 CRUD」「块编辑」「插入工具结果」等人工测试条目。*
