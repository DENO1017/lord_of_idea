# 《灵感之主》APP 人工测试条目（QA 用）

本文档供 QA 对当前版本进行**人工功能测试**使用，按模块列出可执行条目，每条含**步骤**与**预期结果**。勾选 `[ ]` 表示待测，`[x]` 表示已通过，`[!]` 表示有优化反馈或未通过，`[-]` 表示未开发或跳过测试。

**适用范围**：P0 基础架设、P1 工具先行、P2 手帐核心已实现功能；本轮测试覆盖上述全部模块及市集/首页占位、回归与兼容项。手账页为完整手账列表与 CRUD，非占位。

---

## 1. 文档说明与版本

| 项 | 说明 |
|----|------|
| 文档位置 | `docs/qa/app_manual_test_checklist.md` |
| 适用阶段 | P0 已完成、P1 已完成、P2 已完成（截至 2026-02-23 Review） |
| 测试类型 | 人工功能测试（非自动化） |
| 参考文档 | [P0 交付清单](../project/p0_deliverables.md)、[P1 交付清单](../project/p1_deliverables.md)、[P2 交付清单](../project/p2_deliverables.md)、[路由规格](../technical/routes_spec.md)、[主壳规格](../design/main_shell_spec.md)、[手帐数据模型规格](../technical/journal_data_models_spec.md) |
| 生成依据 | [项目进度审查记录](../project/review_log.md) 最新一条 |

---

## 2. 测试环境与前置

- **设备**：建议在真机或模拟器上执行（至少覆盖一种分辨率）。
- **构建**：使用 `flutter run` 或已安装的 Debug/Release 包。
- **前置**：无登录要求；如需验证设置持久化，需重启应用。

---

## 3. P0：基础架设

### 3.1 应用启动与主题

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-1 | 冷启动无崩溃 | 从桌面点击应用图标启动 | 应用正常打开，无闪退、无白屏卡死 | [ ] |
| P0-2 | 首屏为首页 | 启动后观察首屏 | 显示首页（Home）内容，底部为五页签导航 | [ ] |
| P0-3 | 浅色主题展示 | 在设置中选「浅色」后返回任意页 | 界面为浅色主题，主色与设计一致（如复古风格） | [ ] |
| P0-4 | 深色主题展示 | 在设置中选「深色」后返回任意页 | 界面为深色主题，色板切换正确 | [ ] |
| P0-5 | 跟随系统主题 | 在设置中选「跟随系统」，并切换系统深/浅色 | 应用主题随系统切换 | [ ] |

### 3.2 路由与底部导航

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-6 | 根路径重定向 | 若支持直接打开 `/` 或首次启动 | 实际显示首页，等价于 `/home` | [ ] |
| P0-7 | 底部五页签可见 | 观察底部导航栏 | 从左到右依次：首页、工具、手账、市集、我的（或等价文案） | [ ] |
| P0-8 | 点击「首页」 | 从任意页点击底部「首页」 | 进入首页（HomeScreen），内容区切换正确 | [ ] |
| P0-9 | 点击「工具」 | 点击底部「工具」 | 进入工具聚合页（ToolsScreen） | [ ] |
| P0-10 | 点击「手账」 | 点击底部「手账」 | 进入手账列表页（JournalListScreen） | [ ] |
| P0-11 | 点击「市集」 | 点击底部「市集」 | 进入市集占位页（MarketScreen） | [ ] |
| P0-12 | 点击「我的」 | 点击底部「我的」 | 进入「我的」/设置页（MeScreen 或 SettingsScreen） | [ ] |
| P0-13 | 页签高亮正确 | 切换不同页签 | 当前页签有高亮/选中态，与内容区一致 | [ ] |

### 3.3 设置与持久化

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P0-14 | 设置页可进入 | 从「我的」或底部「我的」进入设置 | 可见主题、语言等设置项 | [ ] |
| P0-15 | 主题切换生效 | 在设置中切换主题（浅/深/跟随系统） | 立即生效，无需重启 | [ ] |
| P0-16 | 主题持久化 | 在设置中改为深色 → 完全退出应用 → 再次打开 | 仍为深色主题 | [ ] |
| P0-17 | 语言切换（若有） | 若有语言选项，切换语言 | 界面文案切换正确或符合 l10n 占位 | [ ] |
| P0-18 | 语言持久化（若有） | 切换语言后退出并重启 | 语言设置保持 | [ ] |

---

## 4. P1：工具先行

### 4.1 工具聚合页与入口

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-1 | 工具页入口形式 | 进入「工具」页 | 骰子、诗签、占卜（塔罗）以按钮/卡片形式排布 | [ ] |
| P1-2 | 骰子入口文案 | 查看工具页 | 有「骰子」或 toolDice 对应文案的入口 | [ ] |
| P1-3 | 诗签入口文案 | 查看工具页 | 有「诗签」或 toolPoemSlip 对应文案的入口 | [ ] |
| P1-4 | 占卜/塔罗入口文案 | 查看工具页 | 有「占卜」/「塔罗」或 toolTarot 对应文案的入口 | [ ] |

### 4.2 骰子工具（/tools/dice）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-5 | 进入骰子页 | 从工具页点击骰子入口 | 进入骰子页（DiceScreen），可返回工具页 | [ ] |
| P1-6 | 快捷单颗 d6 | 点击 d6 快捷按钮（若有） | 掷出 1d6，结果在 1～6 之间，界面展示 total 或 rolls | [ ] |
| P1-7 | 快捷 d20 | 点击 d20 快捷按钮（若有） | 掷出 1d20，结果在 1～20 之间 | [ ] |
| P1-8 | 表达式 2d6+3 | 输入「2d6+3」并掷骰 | 得到 2 颗 d6 点数之和加 3，展示表达式与 total（及可选 rolls） | [ ] |
| P1-9 | 表达式 d20 | 输入「d20」并掷骰 | 得到 1 颗 d20 结果，1～20 | [ ] |
| P1-10 | 非法表达式提示 | 输入非法内容（如「d」「0d6」）并掷骰 | 弹框或明确提示解析失败（如 INVALID_DICE 文案） | [ ] |
| P1-11 | 标准面数 d4/d8/d10/d12 | 使用 d4、d8、d10、d12 各掷一次（快捷或表达式） | 点数在对应面数范围内 | [ ] |
| P1-12 | 历史/会话（若有） | 连续掷骰多次 | 有历史列表或会话展示，条数符合规格（如最多 100 条） | [ ] |
| P1-13 | 复制结果（若有） | 点击复制按钮（若有） | 复制格式为「表达式=总和」或规格约定格式 | [ ] |

### 4.3 诗签工具（/tools/poem-slip）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-14 | 进入诗签页 | 从工具页点击诗签入口 | 进入诗签页（PoemSlipScreen），可返回工具页 | [ ] |
| P1-15 | 抽签一次 | 点击抽签按钮 | 展示一条签文（content 全文），结果非空 | [ ] |
| P1-16 | 再抽一次 | 再次点击抽签 | 可得到新签（允许与上条相同） | [ ] |
| P1-17 | 换库（若有多库） | 若有库选择器，切换库后抽签 | 签文来自所选库 | [ ] |
| P1-18 | 默认库 | 未切换库时抽签 | 使用默认库（如妈祖灵签） | [ ] |
| P1-19 | 复制（若有） | 点击复制（若有） | 签文或约定格式已复制 | [ ] |

### 4.4 简易占卜/塔罗（/tools/tarot）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-20 | 进入占卜页 | 从工具页点击占卜/塔罗入口 | 进入占卜页（TarotScreen），可返回工具页 | [ ] |
| P1-21 | 抽牌一次 | 点击抽牌按钮 | 展示一张塔罗牌：牌名、正/逆位、释义 | [ ] |
| P1-22 | 正逆位展示 | 抽牌后观察 | 逆位时牌图或文案能区分正逆（如旋转或逆位释义） | [ ] |
| P1-23 | 释义展示 | 抽牌后观察 | 有简明释义（正位或逆位对应 meaning） | [ ] |
| P1-24 | 放回/不放回（若有） | 若有模式切换，切换后连续抽牌 | 行为符合所选模式 | [ ] |
| P1-25 | 复制（若有） | 点击复制（若有） | 牌面信息或约定格式已复制 | [ ] |

### 4.5 工具结果与导航回归

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P1-26 | 从首页到工具子页 | 首页 → 工具 → 骰子/诗签/占卜 | 能进入对应子页并返回，返回后回到工具页 | [ ] |
| P1-27 | 子页返回 | 在骰子/诗签/占卜页点击返回 | 回到工具聚合页，不直接退出应用 | [ ] |
| P1-28 | 结果可重复生成 | 在各工具中多次操作 | 每次掷骰/抽签/抽牌均可再次执行，无卡死 | [ ] |

---

## 5. P2：手帐核心

### 5.1 手账列表

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P2-1 | 手账页为列表 | 点击底部「手账」 | 显示手账列表页，卡片网格展示手账（封面+标题） | [ ] |
| P2-2 | 空状态仅创建按钮 | 无任何手账时进入手账页 | 仅显示「创建手账」按钮，无长段占位文案 | [ ] |
| P2-3 | 创建手账流程 | 点击「创建手账」→ 弹输入框 → 输入标题确认 | 创建成功并进入该手账首页（第一页） | [ ] |
| P2-4 | 未输入标题用默认名 | 点击创建手账，不输入或清空标题后确认 | 使用默认标题（如「未命名手账」）并进入该手账 | [ ] |
| P2-5 | 点击手账卡片进入详情 | 在列表点击某手账卡片 | 进入该手账详情/阅读视图（/journal/:id） | [ ] |
| P2-6 | 删除手账 | 在列表或详情中删除手账（含确认） | 弹确认框，确认后手账消失，列表更新 | [ ] |
| P2-7 | 列表按时间排序 | 创建多个手账或修改后观察列表 | 列表按最后修改或创建时间倒序（最新在前） | [ ] |

### 5.2 手账详情与阅读视图

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P2-8 | 页签 N/Sum 形式 | 打开多页手账，观察页签 | 页签为「当前页/总页数」如 1/3、2/3 | [ ] |
| P2-9 | 切换页签内容更新 | 点击不同页签 | 内容区展示对应页的块列表 | [ ] |
| P2-10 | 文本块展示 | 当前页有文本块 | 以纯文本段落形式展示 | [ ] |
| P2-11 | 骰子块展示 | 当前页有骰子结果块 | 展示表达式与 total（及可选 rolls） | [ ] |
| P2-12 | 诗签块展示 | 当前页有诗签结果块 | 展示签文全文 | [ ] |
| P2-13 | 占卜块仅牌图 | 当前页有占卜结果块 | 仅展示牌图，正逆位正确（逆位有旋转或区分） | [ ] |
| P2-14 | 空页无占位文案 | 当前页无任何块 | 该区域留空，无「此页暂无内容」等长文案 | [ ] |

### 5.3 块编辑与插入工具结果

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P2-15 | 编辑态工具栏位置 | 在手账详情进入编辑模式，横版/竖版 | 横版右侧、竖版上侧出现工具栏 | [ ] |
| P2-16 | 工具栏有骰子/诗签/占卜入口 | 编辑态下查看工具栏 | 有骰子、诗签、占卜（塔罗）入口 | [ ] |
| P2-17 | 从历史选择结果插入 | 编辑态下从工具栏选「历史」中一条骰子/诗签/占卜结果插入 | 当前页块数+1，新块为对应类型且内容正确 | [ ] |
| P2-18 | 现场使用工具并插入 | 编辑态下点骰子入口，掷骰后插入 | 当前页多一块骰子结果块，内容与刚掷结果一致 | [ ] |
| P2-19 | 添加文本块 | 编辑态下添加文本块，输入内容提交 | 当前页多一文本块，内容为输入内容 | [ ] |
| P2-20 | 块排序 | 编辑态下拖拽或上移/下移块 | 块顺序改变并持久化（再进入该页顺序保持） | [ ] |
| P2-21 | 独立工具页无插入手账 | 在「工具」→ 骰子/诗签/占卜页查看 | 无「插入到手账」或类似按钮 | [ ] |

### 5.4 路由与深链

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| P2-22 | 深链打开手账 | 通过链接或直接导航到 /journal/:id | 打开对应手账详情 | [ ] |
| P2-23 | 深链打开指定页 | 导航到 /journal/:id/page/:pageId | 打开该手账并显示指定页 | [ ] |
| P2-24 | 无效手账 id 重定向 | 导航到不存在的 /journal/xxx | 不崩溃，重定向到 /journal 列表页 | [ ] |

---

## 6. 手账/市集/首页入口（占位与列表）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| H-1 | 手账页可打开 | 点击底部「手账」 | 显示手账列表（卡片网格、创建手账等），非占位 | [ ] |
| H-2 | 市集页可打开 | 点击底部「市集」 | 显示市集占位页 | [ ] |
| H-3 | 首页可打开 | 点击底部「首页」 | 显示首页占位/社区占位 | [ ] |

---

## 7. 回归与兼容（可选）

| # | 测试项 | 步骤 | 预期结果 | 通过 |
|---|--------|------|----------|------|
| R-1 | 横竖屏切换（若支持） | 在手账详情或工具子页旋转设备 | 不崩溃，布局适配或保持可用 | [ ] |
| R-2 | 前后台切换 | 在任意页切到后台再返回 | 应用恢复前台，状态不异常 | [ ] |
| R-3 | 多次切换页签 | 在五页签间快速多次切换 | 无崩溃、无错乱高亮 | [ ] |

---

## 8. 问题记录表（模板）

测试过程中可将问题记录于下表（或单独缺陷单）；**测试完成后由工作流根据本表整理进 [修复单](bug_fix_list.md)**。

| 序号 | 修复单编号 | 测试项 | 现象描述 | 严重程度 |
|------|------------|--------|----------|----------|
| （测试时填写；无问题可留空或删行） |

---

## 9. 修订记录

| 日期 | 修订内容 |
|------|----------|
| 2026-02-23 | 根据最新项目进度审查记录与交付清单生成，供本轮人工测试使用；已含 P2 手帐核心条目。 |

---

*本文档由 [qa-manual-test-workflow](../../.cursor/commands/qa-manual-test-workflow.md) 根据模板生成；P2 手帐核心已纳入「手账 CRUD」「块编辑」「插入工具结果」等人工测试条目。*
